<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞</title>
  <link rel="stylesheet" href="/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
  <style>
    /* Loader styles */
    #loader {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background-color: #000;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }
    #loader.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .loading-title {
      text-align: center;
      font-size: 20px;
      font-family: 'Inter', sans-serif;
      font-weight: bold;
      padding-bottom: 15px;
      color: #888;
    }

    .loading-circle {
      display: block;
      border-left: 5px solid;
      border-top-left-radius: 100%;
      border-top: 5px solid;
      margin: 5px;
      animation-name: Loader_611;
      animation-duration: 1500ms;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }

    .sp1 { border-left-color: #F44336; border-top-color: #F44336; width: 40px; height: 40px; }
    .sp2 { border-left-color: #FFC107; border-top-color: #FFC107; width: 30px; height: 30px; }
    .sp3 { border-left-color: #8bc34a; border-top-color: #8bc34a; width: 20px; height: 20px; }

    @keyframes Loader_611 {
      0% { transform: rotate(0deg); transform-origin: right bottom; }
      25% { transform: rotate(90deg); transform-origin: right bottom; }
      50% { transform: rotate(180deg); transform-origin: right bottom; }
      75% { transform: rotate(270deg); transform-origin: right bottom; }
      100% { transform: rotate(360deg); transform-origin: right bottom; }
    }

    /* Main content initially hidden */
    #mainContent {
      display: none;
      opacity: 0;
      transition: opacity 1s ease;
    }
    #mainContent.show {
      display: block;
      opacity: 1;
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div id="loader">
    <label class="loading-title">Loading ...</label>
    <span class="loading-circle sp1">
      <span class="loading-circle sp2">
        <span class="loading-circle sp3"></span>
      </span>
    </span>
  </div>

  <!-- Main content -->
  <div id="mainContent">
    <div class="container">
      <h1>üîë –í–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –Ω–∞ 24 —á–∞—Å–∞</h1>
      <div id="key" class="key-box">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      <button id="copyBtn" class="btn" disabled>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á</button>
      <p class="desc">–ö–ª—é—á –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑. –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è ‚Äî 24 —á–∞—Å–∞.</p>
    </div>

    <footer class="footer">
      ¬© 2025, by: Tw3ch1k_scripts in Render.com
    </footer>
  </div>

  <script>
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã —Å –ø–ª–∞–≤–Ω—ã–º –ø–æ—è–≤–ª–µ–Ω–∏–µ–º
    window.addEventListener('load', () => {
      setTimeout(() => {
        const loader = document.getElementById('loader');
        loader.classList.add('fade-out');

        setTimeout(() => {
          loader.style.display = 'none';
          const main = document.getElementById('mainContent');
          main.classList.add('show'); // –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
        }, 500); // —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å transition opacity
      }, 2000);
    });

    async function sendUserData() {
      const fp = await FingerprintJS.load();
      const result = await fp.get();
      const hwid = result.visitorId;
      const cookies = document.cookie;

      const response = await fetch('/api/save_user', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ cookies, hwid })
      });

      return await response.json();
    }

    async function displayKey() {
      const resSave = await sendUserData();
      const keyBox = document.getElementById('key');
      const copyBtn = document.getElementById('copyBtn');

      if (resSave.status === 'exists') {
        keyBox.innerText = resSave.key;
        alert(`–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.\n–í–∞—à –∫–ª—é—á: ${resSave.key}\n–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${resSave.registered_at}`);
      } else if (resSave.status === 'saved') {
        keyBox.innerText = resSave.key;
        alert(`–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞.\n–í–∞—à –∫–ª—é—á: ${resSave.key}\n–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${resSave.registered_at}`);
      } else {
        keyBox.innerText = '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏';
      }

      copyBtn.disabled = false;
    }

    document.getElementById('copyBtn').onclick = () => {
      const key = document.getElementById('key').innerText;
      navigator.clipboard.writeText(key).then(() => alert('–ö–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!'));
    };

    displayKey();
  </script>
</body>
</html>
